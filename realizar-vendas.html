<!DOCTYPE html>
<html>
<head>
    <link rel="icon" href="img/logo-menu.png">
    <title>Apex Sistemas - Realização de vendas</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/estilo.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">
</head>

<body>
    <!-- Inicio Navbar -->
    <div class="container-fluid">
        <nav class="navbar navbar-expand-md navbar-fixed-top">
            <div class="container">
                <a class="navbar-brand" href="inicio.html">
                    <img src="img/logo-menu.png" alt="logo sistema" class="img-fluid" style="width: 50px;">
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                    <i class="fa fa-bars" aria-hidden="true" style="color: black;"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavDropdown">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link active" href="inicio.html">Principal <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarProdutosLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Produtos
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarProdutosLink">
                                <a class="dropdown-item" href="cadastrar-produto.html">Cadastrar novo produto</a>
                                <a class="dropdown-item" href="listar-produto.html">Listar produto</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarFuncionariosLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Funcionarios
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarFuncionariosLink">
                                <a class="dropdown-item" href="cadastrar-funcionario.html">Cadastrar novo funcionario</a>
                                <a class="dropdown-item" href="listar-funcionario.html">Listar funcionario</a>
                            </div>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarVendasLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Vendas
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarVendasLink">
                                <a class="dropdown-item" href="realizar-vendas.html">Realizar vendas</a>
                                <a class="dropdown-item" href="listar-vendas.html">Listar vendas</a>
                            </div>
                        </li>

                        <li class="nav-item dropdown">
                            <a class="nav-link" href="">Lucro <span class="sr-only">(current)</span></a>
                        </li>

                    </ul>
                </div>
            </div>
        </nav>
    </div>
    <!-- Fim Navbar -->

    <!-- Inicio Conteúdo -->
    <section id="conteudo">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <h2>Nova Venda</h2>
                </div>
            </div>
    
    
            <form id="form-produto-vendido">
                <div class="form-group row">
                    <label for="produtoSelecionado" class="col-sm-2 col-form-label col-form-label-sm">Nome produto</label>
                    <div class="col-sm-10" id="listaProdutosVendas">
                        
                    </div>
                </div>
                <div class="form-group row">
                    <label for="quantidade" class="col-sm-2 col-form-label col-form-label-sm">Quantidade</label>
                    <div class="col-sm-10">
                        <input type="quantidade" class="form-control form-control-sm" id="quantidade" name="quantidade" placeholder="">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="preco" class="col-sm-2 col-form-label col-form-label-sm">Preço</label>
                    <div class="col-sm-10">
                        <input type="preco" class="form-control form-control-sm" id="preco" name="preco" placeholder="">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="funcionario" class="col-sm-2 col-form-label col-form-label-sm">Funcionario Responsável</label>
                    <div class="col-sm-10">
                        <input type="funcionario" class="form-control form-control-sm" id="funcionario" name="funcionario" placeholder="">
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Salvar</button>
            </form>
        </div>
        
    </section>
    <!-- Fim conteúdo -->

    <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
    <script type="text/javascript" src="js/popper.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/estoque.js"></script>
    <script type="text/javascript" src="js/venda.js"></script>
    <script>
        Estoque.inicializar();
        Venda.inicializarVenda();

        document.getElementById("listaProdutosVendas").innerHTML = Estoque.listarSelect();

        $("#form-produto-vendido").on("submit", function(event){
            event.preventDefault();
            let dados = $(this).serializeArray();
            let produtoVendido = {
                produtoSelecionado: dados[0].value,
                quantidade: dados[1].value,
                preco: dados[2].value,
                funcionario: dados[3].value
            };
            Estoque.adicionarProdutoVendido(produtoVendido);

            alert("Produto Vendido com sucesso!");
	    });
    </script>
</body>

</html>
